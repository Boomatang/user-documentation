:PRODUCT: Red Hat Managed Integration
:ProductName: {PRODUCT}
:PRODUCT_SHORT: Managed Integration
:PRODUCT_INIT: rhmi
:PRODUCT_INIT_CAP: RHMI

:PRODUCT_VERSION: 2
:ProductRelease: {PRODUCT_VERSION}
:MINOR_VERSION_NO: 2.0
:PATCH_VERSION_NO: 2.0.0

:cluster-suffix: <cluster suffix>
:suffix-example: example.u7y2.s1.openshift.com

:URL_COMPONENT_PRODUCT: red_hat_managed_integration

:URL_BASE_GITHUB: https://github.com/integr8ly/user-documentation

:webapp: Solution Explorer
:walkthrough-name: Solution Pattern

:cluster-administrator: cluster administrator
:cluster-developer: developer user

//:rhmi-sso-name: Managed Integration SSO instance
:customer-sso-name: Customer Application SSO instance
:rhsso-name: Red Hat Single Sign-On

:fuse-name: Red Hat Fuse Online
:fuse-version: 7.5
:fuse-docs: https://access.redhat.com/documentation/en-us/red_hat_fuse/{fuse-version}/
:fuse-configs: https://access.redhat.com/articles/310603

:amq-online-name: Red Hat AMQ Online
:amq-online-version: 1.3
:amq-online-docs: https://access.redhat.com/documentation/en-us/red_hat_amq/
:amq-online-configs: https://access.redhat.com/articles/2791941

:three-scale-name: Red Hat 3scale API Management
:three-scale-version: 2.8
:three-scale-docs: https://access.redhat.com/documentation/en-us/red_hat_3scale_api_management/{three-scale-version}/
:three-scale-configs: https://access.redhat.com/articles/2798521

:code-ready-name: Red Hat CodeReady Workspaces for OpenShift
:code-ready-short: CodeReady Workspaces
:code-ready-version: 2.0
:code-ready-docs: https://access.redhat.com/documentation/en-us/red_hat_codeready_workspaces/{code-ready-version}/
:code-ready-configs: N/A
:codeready-workspaces-url: https://codeready-redhat-rhmi-codeready-workspaces.apps.{cluster-suffix}

// Metadata created by nebel
//
// QuickstartID:
// Level: 1
// ParentAssemblies: generated-master.adoc
// UserStory:
// VerifiedInVersion:

[id="admin-guide"]
= Administration Guide for Red Hat Managed Integration 2.0
//If the assembly covers a task, start the title with a verb in the gerund form, such as Creating or Configuring.

This document provides instructions for {cluster-administrator}s to manage and configure a cluster.

// The following include statements pull in the sub-assemblies and the module files that comprise the assembly. Include any combination of concept, procedure, or reference modules required to cover the user story.

// \include::../../assemblies/CATEGORY/as_sub-assembly-id.adoc[leveloffset=+1]
// [leveloffset=+1] ensures that when a module starts with a level-1 heading (= Heading), the heading will be interpreted as a level-2 heading (== Heading) in the assembly.

// \include::../../modules/CATEGORY/TYPE_use-module-id-here.adoc[leveloffset=+1]
// Where TYPE_ can be one of p_, c_, or r_ for 'procedure', 'concept', or 'reference'

//INCLUDES

:leveloffset: +1

:authorization-callback-url: https://keycloak-edge-redhat-rhmi-rhsso.apps.{cluster-suffix}/auth/realms/openshift/broker/github/endpoint
:github-oauth-secret-url: https://console-openshift-console.apps.{cluster-suffix}/k8s/ns/redhat-rhmi-operator/secrets/github-oauth-secret
:creating-workspace-link: https://access.redhat.com/documentation/en-us/red_hat_codeready_workspaces/2.0/html-single/end-user_guide/index#creating-and-configuring-a-new-codeready-workspaces-2.0-workspace

[id="configuring-github-oauth-for-codeready-workspaces_{context}"]
= Configuring GitHub OAuth for CodeReady Workspaces

A GitHub OAuth app allows users to import projects into {code-ready-short} using SSH addresses (`git@`), push to repositories, and use the pull request panel.
This procedure enables automatic SSH key upload to GitHub.

.Procedure

. Register an application on GitHub:
** For GitHub, click https://github.com/settings/profile[Settings] ->
https://github.com/settings/apps[Developer settings] ->
https://github.com/settings/developers[OAuth Apps] ->
https://github.com/settings/applications/new[Register a new OAuth application].
** For GitHub Enterprise, go to your GitHub Enterprise home page and then click
*Settings -> Developer settings -> Register a new application*.
. Enter an application name, for example `CodeReady Workspaces`.
. For the Homepage URL, enter the CodeReady Workspaces URL
+
[subs="attributes"]
----
{codeready-workspaces-url}
----
+
where <cluster-suffix> is the unique sub-domain for your cluster.
For example, {suffix-example}

. Enter the authorization callback URL:
+
[subs="attributes"]
----
{authorization-callback-url}
----
+
where <cluster-suffix> is the unique sub-domain for your cluster.
For example, {suffix-example}

. Click *Register application*.

. Note  the *Client ID* and *Client Secret*. You require these values later in the procedure.

. Log into the OpenShift console as a {cluster-administrator}.

. Navigate to the following URL in your browser:
+
[subs="attributes"]
----
{github-oauth-secret-url}
----
+
where <cluster-suffix> is the unique sub-domain for your cluster.
For example, {suffix-example}

. Select the *Edit Secret* option from the *Actions* menu.
. Enter your GitHub Client ID for the value of *Client Id* and Github Client Secret for the value of *Secret* and click *Save*.
. To validate, create a workspace and connect to GitHub:
.. Log into Solution Explorer as a {cluster-developer}.
.. Navigate to {code-ready-short}.
.. Create a workspace as described in link:{creating-workspace-link}[Creating and configuring a new CodeReady Workspaces 2.0 workspace]
.. Click *Add or Import Project*
.. Click *GitHub*
.. Click *Connect your github account*
.. Click *Authorize*
.. Check that a list of projects is displayed. If projects are not displayed, verify that you followed each step in the procedure above.

:leveloffset!:
